"use strict";(self.webpackChunkspendion=self.webpackChunkspendion||[]).push([[173],{3173:(I,m,t)=>{t.r(m),t.d(m,{LoginComponent:()=>L});var p=t(6814),g=t(2032),i=t(9157),h=t(617),O=t(6385),d=t(2296),v=t(2939),u=t(5940),e=t(6223),P=t(9862),l=t(1896),c=t(2333),f=t(4532),M=t(1945),n=t(5879);function C(r,s){1&r&&(n.TgZ(0,"div",9),n._UZ(1,"mat-spinner",10),n.qZA())}const D=function(){return["/signup"]};let L=(()=>{var r;class s{constructor(o,a,_){this._AuthSvc=o,this._utilSvc=a,this.router=_,this.form=new e.cw({email:new e.NI("",[e.kI.required,e.kI.email]),password:new e.NI("",[e.kI.required,e.kI.minLength(6),e.kI.maxLength(16)])}),this.loading=!1}login(){const o=this.buildUserObject();this.callLoginService(o)}buildUserObject(){return{email:this.form.controls.email.value,password:this.form.controls.password.value}}callLoginService(o){this.loading=!0,this._AuthSvc.login(o).subscribe({next:a=>this.handleResponse(a),error:a=>this.handleError(a)})}handleResponse(o){this._utilSvc.openSnackBar("Login success","Close"),this.loading=!1,localStorage.setItem("token",o.token),localStorage.setItem("person",JSON.stringify(o.person)),this.router.navigate(["/home"])}handleError(o){this._utilSvc.openSnackBar(o.error.msj,"Close"),this.loading=!1}}return(r=s).\u0275fac=function(o){return new(o||r)(n.Y36(c.e),n.Y36(f.F),n.Y36(l.F0))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-login"]],standalone:!0,features:[n._Bn([c.e,f.F]),n.jDz],decls:22,vars:7,consts:[[1,"container"],[1,"wrapper"],[3,"formGroup","ngSubmit","keyup.enter"],["matInput","","type","email","placeholder","Ex: jsmith@gmail.com","formControlName","email",3,"readonly"],["matInput","","type","password","placeholder","******","formControlName","password",3,"readonly"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["class","spinner",4,"ngIf"],[1,"signup-wrapper"],["mat-stroked-button","","color","primary",3,"routerLink"],[1,"spinner"],["mode","indeterminate","color","primary","diameter","40"]],template:function(o,a){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"form",2),n.NdJ("ngSubmit",function(){return a.login()})("keyup.enter",function(){return a.login()}),n._UZ(3,"app-logo"),n.TgZ(4,"h3"),n._uU(5,"Login"),n.qZA(),n.TgZ(6,"mat-form-field")(7,"mat-label"),n._uU(8,"Email"),n.qZA(),n._UZ(9,"input",3),n.qZA(),n.TgZ(10,"mat-form-field")(11,"mat-label"),n._uU(12,"Password"),n.qZA(),n._UZ(13,"input",4),n.qZA(),n.TgZ(14,"button",5),n._uU(15,"Login"),n.qZA(),n.YNc(16,C,2,0,"div",6),n.qZA(),n.TgZ(17,"div",7)(18,"span"),n._uU(19,"Do you haven't an account?"),n.qZA(),n.TgZ(20,"button",8),n._uU(21,"Signup"),n.qZA()()()()),2&o&&(n.xp6(2),n.Q6J("formGroup",a.form),n.xp6(7),n.Q6J("readonly",a.loading),n.xp6(4),n.Q6J("readonly",a.loading),n.xp6(1),n.Q6J("disabled",a.form.invalid||a.loading),n.xp6(2),n.Q6J("ngIf",a.loading),n.xp6(4),n.Q6J("routerLink",n.DdM(6,D)))},dependencies:[p.ez,p.O5,g.c,g.Nt,i.KE,i.hX,i.lN,h.Ps,O.t,d.ot,d.lW,u.Cq,u.Ou,v.ZX,e.UX,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,P.JF,l.Bz,l.rH,M.R],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-items:center;gap:20px}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:white;border:1px solid rgba(0,0,0,.2);border-radius:7px;padding:20px}form[_ngcontent-%COMP%]{margin:0 auto;width:450px;display:flex;flex-direction:column;text-align:center}h3[_ngcontent-%COMP%]{color:#424242}.signup-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px;margin-top:20px}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-top:20px}@media screen and (max-width: 480px){.container[_ngcontent-%COMP%]{position:relative;top:0;left:0;transform:translate(0)}form[_ngcontent-%COMP%]{width:100%}}"]}),s})()}}]);